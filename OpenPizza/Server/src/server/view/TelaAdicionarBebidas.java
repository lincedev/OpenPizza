/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */

package server.view;

import java.sql.*;
import javax.swing.JOptionPane;
import server.modelo.Autenticacao;
import server.persistencia.Banco;

/**
 *
 * @author Wellington
 */
public class TelaAdicionarBebidas extends javax.swing.JFrame {
    
    private TelaCRUDBebidas telaCrudBebidas;
    private Banco bancoDados = new Banco();
    private Connection connection;
    private Autenticacao autenticacaoServer;
    private String descricaoBebida;
    private String precoBebida;
    private float precoBebidaFinal;
    
    public TelaAdicionarBebidas() {
        initComponents();
    }

    public TelaAdicionarBebidas(TelaCRUDBebidas telaCrudBebidas, Autenticacao autenticacaoServer)            
    {
        this();        
        this.setAutenticacaoServer(autenticacaoServer);        
        this.setTelaCrudBebidas(telaCrudBebidas);
    }
    
    
    public TelaCRUDBebidas getTelaCrudBebidas() {
        return telaCrudBebidas;
    }

    public void setTelaCrudBebidas(TelaCRUDBebidas telaCrudBebidas) {
        this.telaCrudBebidas = telaCrudBebidas;
    }
        
    public Banco getBancoDados() {
        return bancoDados;
    }

    public void setBancoDados(Banco bancoDados) {
        this.bancoDados = bancoDados;
    }

    public Autenticacao getAutenticacaoServer() {
        return autenticacaoServer;
    }

    public void setAutenticacaoServer(Autenticacao autenticacaoServer) {
        this.autenticacaoServer = autenticacaoServer;
    }
        
    public String getDescricaoBebida() {
        return descricaoBebida;
    }

    public void setDescricaoBebida(String descricaoBebida) {
        this.descricaoBebida = descricaoBebida;
    }

    public String getPrecoBebida() {
        return precoBebida;
    }

    public void setPrecoBebida(String precoBebida) {
        this.precoBebida = precoBebida;
    }

    public float getPrecoBebidaFinal() {
        return precoBebidaFinal;
    }

    public void setPrecoBebidaFinal(float precoBebidaFinal) {
        this.precoBebidaFinal = precoBebidaFinal;
    }
    
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        painelCadastroBebidas = new javax.swing.JPanel();
        labelDescricaoBebida = new javax.swing.JLabel();
        textDescricaoBebida = new javax.swing.JTextField();
        labelPrecoBebida = new javax.swing.JLabel();
        textPrecoBebida = new javax.swing.JTextField();
        buttonCadastrarBebida = new javax.swing.JButton();
        buttonCancelarCadastroBebida = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Adicionar - Bebidas");
        setMaximumSize(new java.awt.Dimension(270, 300));
        setMinimumSize(new java.awt.Dimension(270, 300));
        setPreferredSize(new java.awt.Dimension(270, 300));
        setResizable(false);

        labelDescricaoBebida.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        labelDescricaoBebida.setText("Descrição:");

        textDescricaoBebida.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textDescricaoBebidaActionPerformed(evt);
            }
        });

        labelPrecoBebida.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        labelPrecoBebida.setText("Preço:");

        textPrecoBebida.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                textPrecoBebidaActionPerformed(evt);
            }
        });

        buttonCadastrarBebida.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        buttonCadastrarBebida.setText("Cadastrar");
        buttonCadastrarBebida.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonCadastrarBebidaActionPerformed(evt);
            }
        });

        buttonCancelarCadastroBebida.setFont(new java.awt.Font("Tahoma", 0, 14)); // NOI18N
        buttonCancelarCadastroBebida.setText("Cancelar");
        buttonCancelarCadastroBebida.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                buttonCancelarCadastroBebidaActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout painelCadastroBebidasLayout = new javax.swing.GroupLayout(painelCadastroBebidas);
        painelCadastroBebidas.setLayout(painelCadastroBebidasLayout);
        painelCadastroBebidasLayout.setHorizontalGroup(
            painelCadastroBebidasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(painelCadastroBebidasLayout.createSequentialGroup()
                .addContainerGap()
                .addGroup(painelCadastroBebidasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(textDescricaoBebida)
                    .addGroup(painelCadastroBebidasLayout.createSequentialGroup()
                        .addComponent(buttonCancelarCadastroBebida)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 74, Short.MAX_VALUE)
                        .addComponent(buttonCadastrarBebida))
                    .addGroup(painelCadastroBebidasLayout.createSequentialGroup()
                        .addGroup(painelCadastroBebidasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(labelDescricaoBebida)
                            .addGroup(painelCadastroBebidasLayout.createSequentialGroup()
                                .addComponent(labelPrecoBebida)
                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                                .addComponent(textPrecoBebida, javax.swing.GroupLayout.PREFERRED_SIZE, 70, javax.swing.GroupLayout.PREFERRED_SIZE)))
                        .addGap(0, 0, Short.MAX_VALUE)))
                .addContainerGap())
        );
        painelCadastroBebidasLayout.setVerticalGroup(
            painelCadastroBebidasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(painelCadastroBebidasLayout.createSequentialGroup()
                .addComponent(labelDescricaoBebida)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(textDescricaoBebida, javax.swing.GroupLayout.PREFERRED_SIZE, 89, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(18, 18, 18)
                .addGroup(painelCadastroBebidasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(textPrecoBebida, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(labelPrecoBebida))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 97, Short.MAX_VALUE)
                .addGroup(painelCadastroBebidasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(buttonCadastrarBebida)
                    .addComponent(buttonCancelarCadastroBebida))
                .addGap(17, 17, 17))
        );

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(painelCadastroBebidas, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(painelCadastroBebidas, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        painelCadastroBebidas.getAccessibleContext().setAccessibleName("");

        pack();
    }// </editor-fold>//GEN-END:initComponents

    private void textDescricaoBebidaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textDescricaoBebidaActionPerformed
        this.setDescricaoBebida(textDescricaoBebida.getText());
    }//GEN-LAST:event_textDescricaoBebidaActionPerformed

    private void textPrecoBebidaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_textPrecoBebidaActionPerformed
        this.setPrecoBebida(textPrecoBebida.getText());
    }//GEN-LAST:event_textPrecoBebidaActionPerformed

    private void buttonCancelarCadastroBebidaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buttonCancelarCadastroBebidaActionPerformed
        this.setVisible(false);
        this.setEnabled(false);
        this.telaCrudBebidas.setVisible(true);
        this.telaCrudBebidas.setEnabled(true);
    }//GEN-LAST:event_buttonCancelarCadastroBebidaActionPerformed

    private void buttonCadastrarBebidaActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_buttonCadastrarBebidaActionPerformed
        this.setDescricaoBebida(textDescricaoBebida.getText());
        this.setPrecoBebida(textPrecoBebida.getText());
        
        if(this.getDescricaoBebida().equals("")){
            JOptionPane.showMessageDialog(null, "Por favor preencha o campo 'Descrição'");
        } else if(this.getPrecoBebida().equals("")){
                JOptionPane.showMessageDialog(null, "Preencha o campo 'Preço'");
                } else {
                    this.setPrecoBebidaFinal(Float.parseFloat(textPrecoBebida.getText()));
                    if(this.getPrecoBebidaFinal() <= 0.00){
                    JOptionPane.showMessageDialog(null, "Por favor, preencha com valores Positivos o campo 'Preço'");
                }
            }
        
        if((!(this.getDescricaoBebida().equals(""))) && (!(this.getPrecoBebida().equals(""))) && (!(this.getPrecoBebidaFinal() <= 0.00))){
            try{
                boolean retorno = bancoDados.inserirBebida(this.getAutenticacaoServer(), this.getDescricaoBebida(), this.getPrecoBebidaFinal());
                if(retorno == true){
                    JOptionPane.showMessageDialog(null, "Bebida cadastrada com sucesso!!!");
                }else{
                    JOptionPane.showMessageDialog(null, "Não foi possível cadastrar a bebida");
                }                                    
            } catch(Exception e){
                JOptionPane.showMessageDialog(null, "Não foi possível cadastrar a bebida");
            }
        }                                
        //this.setEnabled(false);
        //this.setVisible(false);
        //this.telaCrudBebidas.setEnabled(true);
        //this.telaCrudBebidas.setVisible(true);
    }//GEN-LAST:event_buttonCadastrarBebidaActionPerformed

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(TelaAdicionarBebidas.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(TelaAdicionarBebidas.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(TelaAdicionarBebidas.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(TelaAdicionarBebidas.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new TelaAdicionarBebidas().setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton buttonCadastrarBebida;
    private javax.swing.JButton buttonCancelarCadastroBebida;
    private javax.swing.JLabel labelDescricaoBebida;
    private javax.swing.JLabel labelPrecoBebida;
    private javax.swing.JPanel painelCadastroBebidas;
    private javax.swing.JTextField textDescricaoBebida;
    private javax.swing.JTextField textPrecoBebida;
    // End of variables declaration//GEN-END:variables
}
